<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小狗MBTI测试 - 发现你家毛孩子的真实性格</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="styles.css">
<base target="_blank">
</head>
<body class="app-mode">
    <!-- 背景音乐 -->
    <audio id="bg-music" loop>
        <source src="resources/bgm.mp3" type="audio/mp3">
    </audio>
    <button id="music-toggle" class="music-toggle">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="music-icon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
        </svg>
        <div class="music-off-line"></div>
    </button>

    <!-- 欢迎页面 -->
    <div id="welcome-page" class="page active">
        <img src="resources/logo.png" alt="BOND萌宠芳邻" class="bond-logo">
        <div class="hero-section">
            <div class="hero-content">
                <div class="hero-image">
                    <img src="resources/hero-puppy.png" alt="可爱的小狗" class="hero-puppy">
                </div>
                <h1 class="hero-title">
                    <span class="title-main">小狗MBTI</span>
                    <span class="title-sub">狗格测试</span>
                </h1>
                <p class="hero-subtitle">发现你家毛孩子的真实性格</p>
                <button id="start-test-btn" class="btn-primary btn-large">
                    <span>开始测试</span>
                    <span class="btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width:24px;height:24px;margin-left:12px;">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                        </svg>
                    </span>
                </button>
            </div>
        </div>
        
        <div class="instructions-section">
            <div id="instructions-content" class="instructions-content">
                <div class="instruction-card">
                    <h3 style="text-align: center;">测试说明</h3>
                    <ul>
                        <li>以狗狗过去2-4周的典型表现作答</li>
                        <li>幼犬/刚到家不足2周不建议测试</li>
                        <li>每题只能选A或B，选择"它确实怎样"而非"希望它怎样"</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 测试页面 -->
    <div id="test-page" class="page">
        <div class="test-header">
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <span class="progress-text">
                    <span id="current-question">1</span> / 16
                </span>
            </div>
        </div>

        <div class="test-content">
            <div class="question-card">
                <div class="quesiton-label">
                    <div class="question-number">
                        第 <span id="question-number">1</span> 题
                    </div>
                    <div class="question-dimension" id="question-dimension">
                        外向E / 内向I
                    </div>
                </div>
                
                <h2 class="question-text" id="question-text">
                    遇到陌生狗/陌生人时，它通常：
                </h2>
                <div class="options-container">
                    <button class="option-btn" id="option-a" data-value="A">
                        <span class="option-label">A</span>
                        <span class="option-text" id="option-a-text">
                            先冲上去闻/想打招呼
                        </span>
                    </button>
                    <button class="option-btn" id="option-b" data-value="B">
                        <span class="option-label">B</span>
                        <span class="option-text" id="option-b-text">
                            先退后观察，确定安全再靠近
                        </span>
                    </button>
                </div>
            </div>
            
            <div class="test-navigation">
                <button id="prev-btn" class="btn-secondary" disabled>
                    <svg t="1766076133876" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4096" style="width:24px;height:24px;vertical-align:middle;margin-right:4px;margin-right:-2px;fill:#42AADF;">
                        <path d="M262.144 618.496l255.68 170.432A128 128 0 0 0 716.8 682.432V341.568a128 128 0 0 0-199.008-106.496L262.144 405.504a128 128 0 0 0 0 212.992z" p-id="4097"></path>
                    </svg> 上一题&nbsp;&nbsp;
                </button>
                <button id="next-btn" class="btn-secondary" style="display: none;">
                     &nbsp;&nbsp;下一题 <svg t="1766076133876" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4096" style="width:24px;height:24px;vertical-align:middle;margin-left:-2px;fill:#42AADF;">
                        <path d="M761.856 405.504l-255.68-170.432A128 128 0 0 0 307.2 341.568v340.864a128 128 0 0 0 199.008 106.496l255.648-170.432a128 128 0 0 0 0-212.992z" p-id="4097"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- 加载页面 -->
    <div id="loading-page" class="page">
        <div class="loading-content">
            <div class="loading-animation">
                <div class="bone-spinner">
                    <img src="resources/bone-icon.png" alt="骨头" class="bone-icon">
                </div>
            </div>
            <h2 class="loading-title" id="loading-text">正在分析狗格...</h2>
            <div class="loading-progress">
                <div class="loading-bar">
                    <div class="loading-fill" id="loading-fill"></div>
                </div>
            </div>
            <div class="loading-subtext" id="loading-subtext">正在连接汪星信号...</div>
        </div>
    </div>

    <!-- 结果页面 -->
    <div id="result-page" class="page">

        <div class="result-content">
            <!-- 海报容器 -->
            <div id="result-poster" class="result-poster">
                <!-- 装饰角标 -->
                <div class="poster-badge">BOND萌宠芳邻</div>

                <div class="result-header-group">
                    <div class="result-image">
                        <img id="result-puppy-image" src="resources/estj.png" alt="结果狗狗" class="result-puppy">
                    </div>
                    <div class="result-title-group">
                        <h1 id="result-type" class="result-type-text">ESTJ</h1>
                        <h2 id="result-name" class="result-name-text">纪律队长犬</h2>
                    </div>
                </div>

                <p id="result-description" class="result-description-text">
                    守规矩、执行力强
                </p>

                <div class="personality-section">
                    <div id="personality-traits" class="traits-container">
                        <span class="trait-tag">守规矩</span>
                        <span class="trait-tag">执行力强</span>
                        <span class="trait-tag">有组织</span>
                    </div>
                </div>

                <div class="dimensions-section">
                    <div class="dimensions-grid">
                        <div class="dimension-mini" id="dim-ei">
                            <div class="dim-label-row">
                                <span>E 外向</span>
                                <span id="value-ei" class="dim-val">75%</span>
                            </div>
                            <div class="dimension-bar small">
                                <div class="dimension-fill" data-dimension="EI"></div>
                            </div>
                        </div>
                        <div class="dimension-mini" id="dim-sn">
                            <div class="dim-label-row">
                                <span>S 实感</span>
                                <span id="value-sn" class="dim-val">60%</span>
                            </div>
                            <div class="dimension-bar small">
                                <div class="dimension-fill" data-dimension="SN"></div>
                            </div>
                        </div>
                        <div class="dimension-mini" id="dim-tf">
                            <div class="dim-label-row">
                                <span>T 理性</span>
                                <span id="value-tf" class="dim-val">80%</span>
                            </div>
                            <div class="dimension-bar small">
                                <div class="dimension-fill" data-dimension="TF"></div>
                            </div>
                        </div>
                        <div class="dimension-mini" id="dim-jp">
                            <div class="dim-label-row">
                                <span>J 判断</span>
                                <span id="value-jp" class="dim-val">70%</span>
                            </div>
                            <div class="dimension-bar small">
                                <div class="dimension-fill" data-dimension="JP"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="recommendations-section compact">
                    <div class="rec-row">
                        <div class="rec-item">
                            <h4>🤝 最佳狗友</h4>
                            <div id="best-friends" class="text-content">
                                乖乖配合型 (ISTJ)、温柔跟随派 (ISFJ)
                            </div>
                        </div>
                        <div class="rec-item">
                            <h4>🎯 最佳场景</h4>
                            <div id="best-scenes" class="text-content">
                                固定路线散步、训练课
                            </div>
                        </div>
                    </div>
                    <div class="rec-item full-width">
                        <h4>💡 小小提醒</h4>
                        <p id="tips-text" class="text-content">
                            遇到太会整活的"疯玩派"，你可能会忍不住当场开班上课
                        </p>
                    </div>
                </div>
                
                <div class="poster-footer">
                    <img src="resources/qrcode.jpg" alt="扫码测一测" class="qr-code">
                    <div class="poster-copyright">© 2025 小狗MBTI</div>
                </div>
            </div>

            <div class="result-actions">
                <button id="retake-btn" class="btn-secondary">
                    重新测试
                </button>
                <button id="share-btn" class="btn-primary">
                    生成海报分享
                </button>
                <button id="view-all-btn" class="btn-secondary" onclick="window.location.href='personalities.html'" style="display:none;">
                    查看所有狗格
                </button>
            </div>
        </div>
    </div>

    <!-- 分享弹窗 -->
    <div id="share-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>长按保存图片分享</h3>
            <div class="modal-image-container">
                <img id="generated-poster" src="" alt="结果海报">
            </div>
            <div class="modal-actions">
                <button id="close-modal-btn" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>